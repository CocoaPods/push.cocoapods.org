<% @title = 'Commits' %>

<ul class="nav nav-tabs">
  <% ['current', 'failed', 'succeeded', 'all'].each do |scope| %>
    <li<%= ' class="active"' if params[:scope] == scope %>>
      <a href="<%= url("/commits?scope=#{scope}") %>"><%= scope.capitalize %></a>
    </li>
  <% end %>
</ul>

<table class="table table-bordered table-hover">
  <thead>
    <tr>
      <th>ID</th>
      <th>Pod</th>
      <th>Version</th>
      <th>Created At</th>
      <th>Updated At</th>
    </tr>
  </thead>
  <tbody>
    <% @commits.each do |commit| %>
      <!-- TODO Use a partial here and in show.erb? -->
      <tr class="<%= (commit.succeeded ? 'success' : 'error') unless commit.succeeded == nil %>">
        <% href = url("/commits/#{commit.id}") %>
        <% [commit.id, commit.pod_version.pod.name, commit.pod_version.name, commit.created_at.to_formatted_s(:rfc822), commit.updated_at.try(:to_formatted_s, :rfc822)].each do |value| %>
          <td><a href="<%= href %>"><%= value || 'n/a' %></a></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>
